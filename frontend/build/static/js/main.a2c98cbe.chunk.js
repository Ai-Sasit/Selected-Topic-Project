(this.webpackJsonpstreamingweb=this.webpackJsonpstreamingweb||[]).push([[0],{183:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(37),s=a.n(n),r=(a(82),a(83),a(84),a(5)),i=a(10),l=Object(i.a)(),o=a(6),d=a(3),u=a.n(d),j=a(9),m=a(8),b=a(45),f=a(2),O=a(73),h=a.n(O).a.create({baseURL:"https://likestream-42add-default-rtdb.asia-southeast1.firebasedatabase.app/"}),p="CREATE_STREAM",x="FETCH_STREAMS",g="SIGN_IN",v="SIGN_OUT",y="FETCH_STREAM",N="DELETE_STREAM",_="EDIT_STREAM",k=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/streams.json",t);case 2:return a=e.sent,e.next=5,h.patch("/streams/".concat(a.data.name,".json"),{key:a.data.name});case 5:return e.abrupt("return",a.data.name);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/streams.json");case 2:a=e.sent,t({type:x,payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("/streams/".concat(e,".json"));case 2:c=t.sent,a({type:y,payload:c.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=a(0);var I=Object(f.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return{type:g,payload:e}},signOut:function(){return{type:v}}})((function(e){var t=null,a=Object(c.useState)(""),n=Object(m.a)(a,2),s=n[0],r=n[1],i=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.b)(b.a,"384875649458-3mu6rmaenhtmadf937p6i1f020j3i9uk.apps.googleusercontent.com","email");case 2:t=e.sent,r(t),l(t.isSignedIn.get()),t.isSignedIn.listen(l);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){try{i()}catch(e){console.warn(e.message)}}),[]);var l=function(a){if(a){var c=t.currentUser.get().getBasicProfile(),n={userId:c.getId(),userName:c.getName(),userEmail:c.getEmail(),userImg:c.getImageUrl()};e.signIn(n)}else e.signOut()};return e.isSignedIn?Object(E.jsx)("button",{className:"bt-google sign-out",onClick:function(){s.signOut()},children:"Sign Out"}):Object(E.jsx)("button",{className:"bt-google sign-in",onClick:function(){s.signIn()},children:"Google Sign In"})}));var C=function(e){var t=Object(f.d)((function(e){return e.auth.profile})),a=null,c=null;try{a="[ "+t.userName+" ]",c=t.userImg}catch(n){}return Object(E.jsxs)("header",{className:"bar_header",id:"Header",children:[Object(E.jsxs)("div",{className:"area_header",children:[Object(E.jsx)("div",{className:"text_header",onClick:function(){window.location.replace("/")},children:Object(E.jsx)(o.a,{to:"#",className:"link-head",children:"Like Streaming | Easy Platform for Streamer"})}),Object(E.jsx)("img",{className:"profileimg",src:c}),Object(E.jsx)("div",{className:"user_name",children:a}),Object(E.jsx)(I,{})]}),Object(E.jsx)("div",{className:"sub-header"})]})};var T=function(){return Object(E.jsx)("footer",{className:"Footer_area",id:"Footer",children:Object(E.jsx)("p",{className:"text_footer",children:"Software Engineer | Computer Science | UBU"})})},B=a(74),D=a.n(B),L=a(39);a(184);L.a.initializeApp({apiKey:"AIzaSyD_Aq4IM1ZEqB2GUBMSMEVOonaQVn8kSco",authDomain:"likestream-42add.firebaseapp.com",projectId:"likestream-42add",storageBucket:"likestream-42add.appspot.com",messagingSenderId:"37019108240",appId:"1:37019108240:web:158319198a70c86c40e915",measurementId:"G-3ZQ24F4EM5"});var M=L.a.storage(),q=a.p+"static/media/Uploading.5a943af3.gif";var U=function(e){var t=D()().format("dddd DD MMMM YYYY HH:mm"),a=Object(c.useState)(null),n=Object(m.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(null),l=Object(m.a)(i,2),d=l[0],u=l[1],j=Object(c.useState)(null),b=Object(m.a)(j,2),O=b[0],h=b[1],p=Object(c.useState)(null),x=Object(m.a)(p,2),g=x[0],v=x[1],y=Object(c.useState)(null),N=Object(m.a)(y,2),_=N[0],w=N[1],S=document.getElementById("bt-create"),I=document.getElementById("in-key"),C=document.getElementById("bt-hidden"),T=document.getElementById("keys"),B=Object(c.useState)(null),L=Object(m.a)(B,2),U=L[0],A=L[1],R=null,F=null,P=Object(f.d)((function(e){return e.auth.profile})),H=Object(f.d)((function(e){return e.auth.isSignedIn}));try{R=P.userId,F=P.userName}catch(Y){}var z={title:s,desc:g,img_url:O,img_path:_,userId:R,streamer:F,date_time:t,video_url:null};Object(c.useEffect)((function(){G()}),[]);var G=function(){H?console.log("Login",!0,window.location.pathname):(console.log("Login",!1,window.location.pathname),e.history.push("/"))};return d&&(console.log(d),w("images/".concat(d.name)),M.ref("images/".concat(d.name)).put(d).on("state_changed",(function(e){console.log("Uploading...","".concat(e.bytesTransferred," bytes"))}),(function(e){console.log(e)}),(function(){M.ref("images").child(d.name).getDownloadURL().then((function(e){h(e),document.getElementById("pre-img").src=e}))})),u(null)),Object(E.jsxs)("div",{className:"addboard",children:[Object(E.jsx)("br",{}),Object(E.jsx)("img",{className:"img-upload",id:"pre-img",src:"https://www.lifewire.com/thmb/P856-0hi4lmA2xinYWyaEpRIckw=/1920x1326/filters:no_upscale():max_bytes(150000):strip_icc()/cloud-upload-a30f385a928e44e199a62210d578375a.jpg"}),Object(E.jsx)("br",{}),Object(E.jsx)("div",{className:"req form__group field",children:Object(E.jsx)("input",{type:"file",className:"form__field upload-in",accept:"image/*",onChange:function(e){u(e.target.files[0]),document.getElementById("pre-img").src=q}})}),Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"req form__group field",children:[Object(E.jsx)("input",{type:"input",className:"form__field",placeholder:"Name",onChange:function(e){return r(e.target.value)},required:!0}),Object(E.jsx)("label",{htmlFor:"name",className:"form__label",children:"Title"})]}),Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"req form__group field",children:[Object(E.jsx)("textarea",{className:"form__field desc_form",placeholder:"Name",onChange:function(e){return v(e.target.value)},required:!0}),Object(E.jsx)("label",{htmlor:"name",className:"form__label",children:"Description"})]}),Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"req form__group field key_form",id:"in-key",children:[Object(E.jsx)("input",{type:"input",className:"form__field1",placeholder:"Name",id:"keys",disabled:!0}),Object(E.jsx)("label",{htmlFor:"name",className:"form__label",children:"Stream Key"})]}),Object(E.jsxs)("div",{id:"bt-hidden",children:[Object(E.jsx)("button",{className:"bt-home",onClick:function(){e.history.push("/")},children:"Home"}),Object(E.jsx)(o.a,{to:"/play-stream/".concat(U),children:Object(E.jsx)("button",{className:"bt-live",children:"Preview"})})]}),Object(E.jsx)("button",{className:"bt-create",onClick:function(){O&&s&&g?(S.style.display="none",k(z).then((function(e){I.style.display="block",C.style.display="flex",T.value=e,A(e)}))):alert("Creating Failed | need to add all input form.")},id:"bt-create",children:"Create"}),Object(E.jsx)("div",{className:"loader",id:"loader"}),Object(E.jsx)("br",{})]})};var A=function(e){var t=e.stream;return Object(E.jsxs)(o.a,{className:"card",to:"/play-stream/".concat(t.key),children:[Object(E.jsx)("img",{src:t.img_url,className:"card-img"}),Object(E.jsx)("div",{className:"card-title",children:t.title})]})};var R=function(e){var t=Object(f.d)((function(e){return Object.values(e.stream)})),a=Object(f.d)((function(e){return e.auth.isSignedIn})),n=Object(f.c)();Object(c.useEffect)((function(){return n(w()),function(){}}),[]);var s=function(){window.location.reload()};return Object(E.jsxs)("div",{children:[a?Object(E.jsxs)("div",{className:"console-bar",children:[Object(E.jsx)(o.a,{className:"link",to:"#",children:Object(E.jsx)("i",{className:"fi-rr-rotate-right",onClick:s})}),Object(E.jsx)(o.a,{className:"link",to:"/create-stream",children:Object(E.jsx)("i",{className:"fi-rr-add"})}),Object(E.jsx)(o.a,{className:"link",to:"/studio",children:Object(E.jsx)("i",{className:"fi-rr-pulse"})}),Object(E.jsx)(o.a,{className:"link",to:"/search-stream",children:Object(E.jsx)("i",{className:"fi-rr-search"})})]}):Object(E.jsxs)("div",{className:"console-bar-so",children:[Object(E.jsx)(o.a,{className:"link",to:"#",children:Object(E.jsx)("i",{className:"fi-rr-rotate-right",onClick:s})}),Object(E.jsx)(o.a,{className:"link",to:"/search-stream",children:Object(E.jsx)("i",{className:"fi-rr-search"})})]}),Object(E.jsx)("ul",{className:"cards",children:t.slice(0).reverse().map((function(e){return Object(E.jsx)("li",{className:"zoomincard",children:Object(E.jsx)(A,{stream:e})},e.key)}))})]})};var F=function(e){var t=e.stream,a=Object(f.c)();return Object(E.jsxs)("div",{className:"s-item",children:[Object(E.jsx)("img",{src:t.img_url,className:"s-img"}),Object(E.jsxs)("div",{className:"s-title",children:[t.title,Object(E.jsx)("br",{}),Object(E.jsxs)("span",{children:["Description: ",t.desc,Object(E.jsx)("br",{}),"Create at ",t.date_time]})]}),Object(E.jsxs)("div",{className:"s-keys",children:[Object(E.jsx)("span",{children:"Stream Key:"})," ",t.key]}),Object(E.jsxs)("div",{className:"s-button",children:[Object(E.jsx)("button",{className:"bt-edit",onClick:function(){e.pop.history.push("/studio/edit/".concat(t.key))},children:"EDIT"}),Object(E.jsx)("br",{}),Object(E.jsx)("button",{className:"bt-delete",onClick:function(){var c;window.confirm("Are you sure you want to delete the stream with title: ".concat(t.title))?(M.ref(t.img_path).delete(),a((c=t.key,function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.delete("/streams/".concat(c,".json"));case 2:t({type:N,payload:c});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.pop.history.push("/studio")):e.pop.history.push("/studio")},children:"DELETE"})]})]})};var P=function(e){var t=Object(f.d)((function(e){return e.auth.isSignedIn})),a=Object(f.d)((function(e){return e.auth.profile})),n=Object(f.d)((function(e){return Object.values(e.stream)})),s=Object(f.c)(),r=null;try{r=a.userId}catch(d){}Object(c.useEffect)((function(){return s(w()),i(),function(){}}),[]);var i=function(){t?console.log("Login",!0,window.location.pathname):console.log("Login",!1,window.location.pathname)},l=n.filter((function(e){return e.userId===r}));return Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"console-bar",children:[Object(E.jsx)(o.a,{className:"link",to:"#",children:Object(E.jsx)("i",{className:"fi-rr-rotate-right",onClick:function(){window.location.reload()}})}),Object(E.jsx)(o.a,{className:"link",to:"/create-stream",children:Object(E.jsx)("i",{className:"fi-rr-add"})}),Object(E.jsx)(o.a,{className:"link",to:"/studio",children:Object(E.jsx)("i",{className:"fi-rr-pulse"})}),Object(E.jsx)(o.a,{className:"link",to:"/search-stream",children:Object(E.jsx)("i",{className:"fi-rr-search"})})]}),Object(E.jsx)("ul",{className:"lists-studio",children:l.slice(0).reverse().map((function(t){return Object(E.jsx)("li",{className:"listitems",children:Object(E.jsx)(F,{stream:t,pop:e})},t.key)}))})]})};var H=function(e){var t=(new Date).toLocaleString("th-TH",{timeZone:"Asia/Bangkok"}),a=Object(c.useState)(null),n=Object(m.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(null),l=Object(m.a)(i,2),o=l[0],d=l[1],b=Object(c.useState)(null),O=Object(m.a)(b,2),p=O[0],x=O[1],g=Object(c.useState)(null),v=Object(m.a)(g,2),y=v[0],N=v[1],k=Object(c.useState)(null),w=Object(m.a)(k,2),I=w[0],C=w[1],T=Object(f.d)((function(t){return t.stream[e.match.params.key]})),B=Object(f.d)((function(e){return e.auth.isSignedIn})),D=Object(f.c)(),L={title:s,desc:y,img_url:p,img_path:I,date_time:t};Object(c.useEffect)((function(){D(S(e.match.params.key)),U()}),[]);var U=function(){B?console.log("Login",!0,window.location.pathname):(console.log("Login",!1,window.location.pathname),e.history.push("/"))};return o&&(console.log(o),C("images/".concat(o.name)),M.ref("images/".concat(o.name)).put(o).on("state_changed",(function(e){console.log("Uploading...","".concat(e.bytesTransferred," bytes"))}),(function(e){console.log(e)}),(function(){M.ref("images").child(o.name).getDownloadURL().then((function(e){x(e),document.getElementById("pre-img").src=e}))})),d(null)),T?Object(E.jsxs)("div",{className:"addboard",children:[Object(E.jsx)("br",{}),Object(E.jsx)("img",{className:"img-upload",id:"pre-img",src:T.img_url}),Object(E.jsx)("br",{}),Object(E.jsx)("div",{className:"req form__group field",children:Object(E.jsx)("input",{type:"file",className:"form__field upload-in",accept:"image/*",onChange:function(e){M.ref(T.img_path).delete(),d(e.target.files[0]),document.getElementById("pre-img").src=q}})}),Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"req form__group field",children:[Object(E.jsx)("input",{type:"input",className:"form__field",placeholder:"Name",onChange:function(e){return r(e.target.value)},required:!0}),Object(E.jsx)("label",{htmlFor:"name",className:"form__label",children:"Title"})]}),Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"req form__group field",children:[Object(E.jsx)("textarea",{className:"form__field desc_form",placeholder:T.desc,onChange:function(e){return N(e.target.value)},required:!0}),Object(E.jsx)("label",{htmlor:"name",className:"form__label",children:"Description"})]}),Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"req form__group field",id:"in-key-edit",children:[Object(E.jsx)("input",{type:"input",className:"form__field1",placeholder:"Name",id:"keys",disabled:!0,value:T.key}),Object(E.jsx)("label",{htmlFor:"name",className:"form__label",children:"Stream Key"})]}),Object(E.jsxs)("div",{id:"bt-edform",children:[Object(E.jsx)("button",{className:"bt-Cancel",onClick:function(){window.location.replace("/studio")},children:"Cancel"}),Object(E.jsx)("button",{className:"bt-Save",onClick:function(){p&&s&&y?D(function(e,t){return function(){var a=Object(j.a)(u.a.mark((function a(c){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.patch("/streams/".concat(e,".json"),t);case 2:n=a.sent,c({type:_,payload:n.data}),window.location.replace("/studio");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e.match.params.key,L)):alert("Saving Failed | need to add all input form.")},children:"Save"})]}),Object(E.jsx)("br",{})]}):Object(E.jsx)("div",{})};var z=function(e){var t=Object(f.d)((function(e){return Object.values(e.stream)})),a=Object(f.c)(),n=Object(c.useState)(""),s=Object(m.a)(n,2),r=s[0],i=s[1],l=Object(c.useState)([]),o=Object(m.a)(l,2),d=o[0],u=o[1];return Object(c.useEffect)((function(){return a(w()),function(){}}),[]),Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"console-bar-sign-out",children:[Object(E.jsx)("input",{type:"text",className:"search",name:"search",onChange:function(e){i(e.target.value)}}),Object(E.jsx)("button",{className:"search-bt",onClick:function(){document.getElementById("default-cards").style.display="none",document.getElementById("search-cards").style.display="flex",u(t.filter((function(e){return e.title.toLowerCase().includes(r.toLowerCase())})))},children:"Search"})]}),Object(E.jsx)("ul",{className:"cards",id:"default-cards",children:t.slice(0).reverse().map((function(e){return Object(E.jsx)("li",{className:"zoomincard",children:Object(E.jsx)(A,{stream:e})},e.key)}))}),Object(E.jsx)("ul",{className:"cards",id:"search-cards",children:d.slice(0).reverse().map((function(e){return Object(E.jsx)("li",{className:"zoomincard",children:Object(E.jsx)(A,{stream:e})},e.key)}))})]})},G=a(30),Y=a.n(G);var K=function(e){var t=Object(f.d)((function(t){return t.stream[e.match.params.key]})),a=Object(c.createRef)(),n=Object(f.c)(),s=null;Object(c.useEffect)((function(){return n(S(e.match.params.key)),r(),function(){s.destroy()}}),[]),Object(c.useEffect)((function(){r()}));var r=function(){var c=e.match.params.key;Y.a.isSupported()&&t&&t.video_url?((s=Y.a.createPlayer({type:"mp4",url:"".concat(t.video_url)})).attachMediaElement(a.current),s.load()):Y.a.isSupported()&&t&&((s=Y.a.createPlayer({type:"flv",url:"https://4d2b-184-82-186-178.ap.ngrok.io/live/".concat(c,".flv")})).attachMediaElement(a.current),s.load())};return t?Object(E.jsxs)("div",{children:[Object(E.jsx)("video",{ref:a,className:"streamPlayer",controls:!0}),Object(E.jsxs)("div",{className:"playerDesc",children:[Object(E.jsx)("h1",{children:t.title}),Object(E.jsx)("h4",{children:t.desc}),Object(E.jsxs)("h6",{children:["Stream by ",t.streamer]}),Object(E.jsxs)("h6",{children:["Stream at ",t.date_time]})]})]}):Object(E.jsx)("div",{})};var V=function(){return Object(E.jsx)(r.b,{history:l,children:Object(E.jsxs)("div",{id:"container",children:[Object(E.jsx)(C,{}),Object(E.jsxs)(r.c,{children:[Object(E.jsx)(r.a,{path:"/",exact:!0,component:R}),Object(E.jsx)(r.a,{path:"/search-stream",component:z}),Object(E.jsx)(r.a,{path:"/create-stream",component:U}),Object(E.jsx)(r.a,{path:"/studio",exact:!0,component:P}),Object(E.jsx)(r.a,{path:"/studio/edit/:key",component:H}),Object(E.jsx)(r.a,{path:"/play-stream/:key",component:K})]}),Object(E.jsx)(T,{})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(23),Z=a(186),J=a(11),Q={isSignedIn:null,profile:null},X=a(22),$=a(49),ee=a.n($),te={},ae=Object(W.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(J.a)(Object(J.a)({},e),{},{isSignedIn:!0,profile:t.payload});case v:return Object(J.a)(Object(J.a)({},e),{},{isSignedIn:!1,profile:null});default:return e}},form:Z.a,stream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(J.a)(Object(J.a)({},e),ee.a.map(t.payload));case p:case y:case _:return Object(J.a)(Object(J.a)({},e),{},Object(X.a)({},t.payload.key,t.payload));case N:return ee.a.omit(e,t.payload);default:return e}}}),ce=a(77),ne="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.c,se=Object(W.d)(ae,ne(Object(W.a)(ce.a)));s.a.render(Object(E.jsx)(f.a,{store:se,children:Object(E.jsx)(V,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){}},[[183,1,2]]]);
//# sourceMappingURL=main.a2c98cbe.chunk.js.map